{{ $category := .Params.category | default "politni-steky" }} {{ $categoryData
:= index .Site.Data.products.categories $category }}
<section class="overflow-hidden relative bg-white" aria-labelledby="catalog-hero-heading">
    <!-- Background decorative elements -->
    {{ $bgEl1 := resources.Get "img/bg-el-1.png" }}
    {{ if $bgEl1 }}
     {{ $bgEl1Mobile := $bgEl1.Resize "150x webp q45" }}
     {{ $bgEl1Tablet := $bgEl1.Resize "200x webp q45" }}
     {{ $bgEl1Desktop := $bgEl1.Resize "266x webp q45" }}
     {{ $bgEl1XLarge := $bgEl1.Resize "340x webp q45" }}
    <img src="{{ $bgEl1Mobile.RelPermalink }}"
      srcset="{{ $bgEl1Mobile.RelPermalink }} 150w,
        {{ $bgEl1Tablet.RelPermalink }} 200w,
        {{ $bgEl1Desktop.RelPermalink }} 266w,
        {{ $bgEl1XLarge.RelPermalink }} 340w"
       sizes="(max-width: 768px) 150px,
       (max-width: 1024px) 200px,
       (max-width: 1536px) 266px,
       340px"
        alt="Декоративний фоновий елемент" aria-hidden="true" loading="lazy"
        class="absolute z-[1] right-[-40px] lg:right-[-14px] xl:right-0 top-[-42px] md:top-[-65px] lg:top-[-60px] xl:top-0 w-[171px] md:w-[217px] lg:w-[266px] xl:w-[340px] h-auto" />
    {{ else }}
    <img src="/img/bg-el-1.png" alt="Декоративний фоновий елемент" aria-hidden="true" loading="lazy"
        class="absolute z-[1] right-[-40px] lg:right-[-14px] xl:right-0 top-[-42px] md:top-[-65px] lg:top-[-60px] xl:top-0 w-[171px] md:w-[217px] lg:w-[266px] xl:w-[340px] h-auto" />
    {{ end }}

    {{ $bgEl2 := resources.Get "img/bg-el-2.png" }}
    {{ if $bgEl2 }}
    {{ $bgEl2Mobile := $bgEl2.Resize "150x webp q55" }}
    {{ $bgEl2MobileMd := $bgEl2.Resize "180x webp q55" }}
    {{ $bgEl2Tablet := $bgEl2.Resize "200x webp q55" }}
    {{ $bgEl2Desktop := $bgEl2.Resize "240x webp q55" }}
    {{ $bgEl2Large := $bgEl2.Resize "300x webp q55" }}
    {{ $bgEl2XLarge := $bgEl2.Resize "360x webp q55" }}
    <img src="{{ $bgEl2Mobile.RelPermalink }}"
        srcset="{{ $bgEl2Mobile.RelPermalink }} 150w, {{ $bgEl2MobileMd.RelPermalink }} 180w, {{ $bgEl2Tablet.RelPermalink }} 200w, {{ $bgEl2Desktop.RelPermalink }} 240w, {{ $bgEl2Large.RelPermalink }} 300w, {{ $bgEl2XLarge.RelPermalink }} 360w"
        sizes="(max-width: 480px) 150px, (max-width: 768px) 180px, (max-width: 1024px) 200px, (max-width: 1280px) 240px, (max-width: 1536px) 300px, 360px"
        alt="Декоративний фоновий елемент" aria-hidden="true" loading="lazy"
        class="absolute z-[1] bottom-0 left-0 w-[171px] md:w-[217px] lg:w-[266px] xl:w-[340px] h-auto" />
    {{ else }}
    <img src="/img/bg-el-2.png" alt="Декоративний фоновий елемент" aria-hidden="true" loading="lazy"
        class="absolute z-[1] bottom-0 left-0 w-[171px] md:w-[217px] lg:w-[266px] xl:w-[340px] h-auto" />
    {{ end }}

    <!-- Stack elements for mobile -->
    <div class="block sm:hidden lg:hidden">
        {{ $stackLeft := resources.Get "img/stack-left.png" }}
        {{ if $stackLeft }}
        {{ $stackLeft1x := $stackLeft.Resize "80x webp q60" }}
        {{ $stackLeft15x := $stackLeft.Resize "120x webp q60" }}
        {{ $stackLeft2x := $stackLeft.Resize "160x webp q60" }}
        
        <img src="{{ $stackLeft1x.RelPermalink }}"
            srcset="{{ $stackLeft1x.RelPermalink }} 80w, {{ $stackLeft15x.RelPermalink }} 120w, {{ $stackLeft2x.RelPermalink }} 160w"
            sizes="(max-width: 400px) 80px, (max-width: 600px) 120px, 160px" width="80" alt="Елемент стеку зліва"
            aria-hidden="true" loading="lazy" class="absolute top-0 left-0 w-[80px] h-auto z-[1]" />
        {{ else }}
        <img src="/img/stack-left.png" alt="Елемент стеку зліва" aria-hidden="true" loading="lazy"
            class="absolute top-0 left-0 w-[80px] h-auto z-[1]" />
        {{ end }}
        {{ $stackRight := resources.Get "img/stack-right.png" }}
        {{ if $stackRight }}
        {{ $stackRight1x := $stackRight.Resize "80x webp q60" }}
        {{ $stackRight15x := $stackRight.Resize "120x webp q60" }}
        {{ $stackRight2x := $stackRight.Resize "160x webp q60" }}
        <img src="{{ $stackRight1x.RelPermalink }}"
            srcset="{{ $stackRight1x.RelPermalink }} 80w, {{ $stackRight15x.RelPermalink }} 120w, {{ $stackRight2x.RelPermalink }} 160w"
            sizes="(max-width: 400px) 80px, (max-width: 600px) 120px, 160px" width="80" alt="Елемент стеку справа"
            aria-hidden="true" loading="lazy" class="absolute bottom-3 right-0 w-[90px] h-auto z-[1]" />
        {{ else }}
        <img src="/img/stack-right.png" alt="Елемент стеку справа" aria-hidden="true" loading="lazy"
            class="absolute bottom-3 right-0 w-[90px] h-auto z-[1]" />
        {{ end }}
    </div>

    <div
        class="w-full max-w-[1280px]  flex flex-col  mx-auto  px-[30px] pt-[40px] max-[450px]:pt-[20px] lg:mb-[113px] md:mb-[60px] mb-[101px] relative z-[2]">
        <nav aria-label="Breadcrumb navigation"
            class="flex items-center gap-6 text-[#ba0108] mb-[75px] md:mb-[35px] w-full">
            <ol class="flex items-center max-[450px]:justify-start" itemscope
                itemtype="https://schema.org/BreadcrumbList">
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <a class="font-[Montserrat] text-[16px] lg:text-[20px] font-normal text-[#ba0108] leading-[120%]"
                        href="/" itemprop="item">
                        <span itemprop="name">Головна</span>
                    </a>
                    <meta itemprop="position" content="1" />
                </li>
                <li class="text-[#ba0108] px-[5px]" aria-hidden="true">&rarr;</li>
                <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                    <span
                        class="font-[Montserrat] text-[16px] lg:text-[20px] font-normal text-[#ba0108]  leading-[120%]"
                        itemprop="name">
                        {{ $categoryData.name }}
                    </span>
                    <meta itemprop="position" content="2" />
                </li>
            </ol>
        </nav>

        <div class="flex flex-col gap-0 justify-between mx-0 md:flex-row">
            <div
                class="flex flex-col gap-[10px] shrink-0 items-center max-w-full md:items-start lg:items-start xl:items-start  md:w-[448px] lg:w-[548px] xl:w-[749px] w-full">
                <h1 id="catalog-hero-heading"
                    class="font-[Unbounded] uppercase leading-[1.1] text-[32px] lg:text-[48px] xl:text-[64px]  text-[#ba0108] font-medium hero-title whitespace-normal break-words max-sm:text-center">
                    {{ $categoryData.name }}
                </h1>
                <p
                    class="font-[Montserrat]   text-[16px] xl:text-[20px] text-[#020303]  max-sm:mb-[40px] md:mb-[60px] leading-[120%] ">
                    {{ if eq $category "politni-steky" }} Компактна та продуктивна
                    інтегрована система для дронів, що об'єднує польотний контролер (FC)
                    на базі потужного мікроконтролера STM32F405 та регулятор швидкості
                    (ESC) 4-в-1 з підтримкою до 20А (25А піково).
                    <br />
                    <br />
                    Завдяки своїм невеликим розмірам та високій функціональності,
                    включаючи вбудований OSD, а часто також барометр і "чорний ящик", він
                    є ідеальним вибором для створення легких та маневрених FPV-дронів {{
                    else if eq $category "videoperedavachi-vtx" }} Професійні
                    відеопередавачі для FPV систем з підтримкою різних частот та
                    потужностей. Забезпечують стабільний сигнал та високу якість
                    відеопередачі на великі відстані. {{ else if eq $category "esc" }}
                    <br />
                    <br />
                    Високоякісні електронні регулятори швидкості для безколекторних
                    двигунів. Підтримують різні прошивки та забезпечують плавне керування
                    швидкістю з високою точністю та надійністю. {{ end }}
                </p>
                <button onclick="window.openContactModal()"
                    aria-label="Отримати комерційну пропозицію для {{ $categoryData.name }}"
                    class="!font-[Montserrat] cursor-pointer text-[16px] sm:text-[20px] md:text-[24px] lg:text-[24px] font-medium text-white bg-[#ba0108] hover:bg-[#e39599] transition-colors w-[354px]  sm:max-w-full sm:w-full md:max-w-[458px] lg:max-w-[458px] xl:max-w-[458px] py-[15px]  h-[58px] md:h-[70px] font-light md:font-normal shadow-[0_4px_16px_0_rgba(0,0,0,0.4)] rounded-[20px]">
                    Отримати пропозицію
                </button>
            </div>
            <div class="flex relative justify-center items-center w-full md:flex-1">
                {{ $stackRotate := resources.Get "img/stack-rotate.png" }}
                {{ if $stackRotate }}
                {{ $stackRotate360 := $stackRotate.Resize "360x webp q70" }}
                {{ $stackRotate400 := $stackRotate.Resize "400x webp q70" }}
                {{ $stackRotate450 := $stackRotate.Resize "450x webp q70" }}
                {{ $stackRotate500 := $stackRotate.Resize "500x webp q70" }}
                <img src="{{ $stackRotate360.RelPermalink }}"
                    srcset="{{ $stackRotate360.RelPermalink }} 360w, {{ $stackRotate400.RelPermalink }} 400w, {{ $stackRotate450.RelPermalink }} 450w, {{ $stackRotate500.RelPermalink }} 500w"
                    sizes="(max-width: 768px) 360px, (max-width: 1024px) 400px, (max-width: 1280px) 450px, 500px"
                    alt="Karma Flights - високотехнологічне українське виробництво" loading="eager" class="hidden md:block object-contain
                              max-w-[400px] h-[400px] lg:max-w-[450px] lg:h-[400px] w-full" />
                {{ else }}
                <img src="/img/stack-rotate.png" alt="Karma Flights - високотехнологічне українське виробництво"
                    loading="eager" class="hidden md:block object-contain
                    max-w-[400px] h-[400px] lg:max-w-[450px] lg:h-[400px] w-full" />
                {{ end }}

                <div
                    class="pointer-events-none absolute -bottom-3 left-1/2 -translate-x-1/2 w-[200px] h-[30px] md:w-[250px] md:h-[40px] lg:w-[300px] lg:h-[50px] xl:w-[410px] xl:h-[80px] rounded-full bg-black/35 blur-2xl hidden md:block" />
            </div>
        </div>
    </div>
</section>

<style>
    @keyframes fadeInUp {
        0% {
            opacity: 0;
            transform: translateY(30px);
        }

        100% {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .hero-title {
        opacity: 0;
        transform: translateY(30px);
        transition: all 0.6s ease-out;
    }

    .hero-title.animate {
        animation: fadeInUp 0.8s ease-out forwards;
    }
</style>

<script>
    // Hero title animation
    function animateHeroTitle() {
        const heroTitles = document.querySelectorAll('.hero-title');

        const observerOptions = {
            threshold: 0.3,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                } else {
                    entry.target.classList.remove('animate');
                }
            });
        }, observerOptions);

        heroTitles.forEach(title => {
            observer.observe(title);
        });
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', animateHeroTitle);
</script>