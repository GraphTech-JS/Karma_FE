{{- $items := .items -}}
{{- $title := .title -}}
{{- $titleClassName := .titleClassName -}}
{{- $className := .className -}}

<div class="{{ $className }}">
  {{- if $title -}}
  <h2 class="{{ $titleClassName | default " text-3xl font-bold text-center mb-12" }}">
    {{ $title }}
  </h2>
  {{- end -}}

  <div class="mx-auto max-w-4xl">
    <div class="space-y-4">
      {{- range $index, $item := $items -}}
      <div class="overflow-hidden bg-white rounded-lg border border-gray-200 shadow-sm">
        <button
          class="flex justify-between items-center px-6 py-4 w-full text-left transition-colors cursor-pointer accordion-trigger hover:bg-gray-50 focus:outline-none focus:bg-gray-50"
          data-target="accordion-{{ $index }}">
          <span class="pr-4 font-semibold text-gray-900">{{ $item.question }}</span>
          <svg class="w-5 h-5 text-gray-500 transition-transform duration-200 transform accordion-icon" fill="none"
            stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </button>
        <div id="accordion-{{ $index }}" class="hidden px-6 pb-4 accordion-content">
          <div class="leading-relaxed text-gray-600">
            {{ $item.answer | markdownify }}
          </div>
        </div>
      </div>
      {{- end -}}
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const accordionTriggers = document.querySelectorAll('.accordion-trigger');

    accordionTriggers.forEach(trigger => {
      trigger.addEventListener('click', function () {
        const targetId = this.getAttribute('data-target');
        const content = document.getElementById(targetId);
        const icon = this.querySelector('.accordion-icon');

        // Close all other accordions
        accordionTriggers.forEach(otherTrigger => {
          if (otherTrigger !== trigger) {
            const otherTargetId = otherTrigger.getAttribute('data-target');
            const otherContent = document.getElementById(otherTargetId);
            const otherIcon = otherTrigger.querySelector('.accordion-icon');

            otherContent.classList.add('hidden');
            otherIcon.classList.remove('rotate-180');
          }
        });

        // Toggle current accordion
        if (content.classList.contains('hidden')) {
          content.classList.remove('hidden');
          icon.classList.add('rotate-180');
        } else {
          content.classList.add('hidden');
          icon.classList.remove('rotate-180');
        }
      });
    });
  });
</script>