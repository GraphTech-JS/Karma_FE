{{ $title := .title }} {{ $subtitle := .subtitle }}

{{ $droneLeft := resources.Get "img/drone-left.png" }}
{{ $droneRight := resources.Get "img/drone-right.png" }}
{{ $faqBg := resources.Get "img/faq-hero-bg.png" }}

{{ if and $droneLeft $droneRight $faqBg }}
{{ $droneLeftWebp := $droneLeft.Resize "680x webp q80" }}
{{ $droneRightWebp := $droneRight.Resize "680x webp q80" }}
{{ $faqBgWebp := $faqBg.Resize "2110x webp q80" }}

<section class="faq-hero h-[363px] md:h-[350px]" style="--faq-bg: url('{{ $faqBgWebp.RelPermalink }}')" aria-labelledby="faq-hero-heading">
  <div class="absolute bottom-0 left-0 z-[2]">
    <img src="{{ $droneLeftWebp.RelPermalink }}" alt="Декоративний дрон зліва" aria-hidden="true"
      class="w-[162px] h-[104px] md:w-[260px] md:h-[167px] lg:w-[306px] lg:h-[197px]" loading="lazy" />
  </div>
  <div class="absolute top-0 right-0 md:bottom-0 md:top-auto z-[2]">
    <img src="{{ $droneRightWebp.RelPermalink }}" alt="Декоративний дрон справа" aria-hidden="true"
      class="w-[92px] h-[64px] md:w-[238px] md:h-[167px] lg:w-[282px] lg:h-[197px]" loading="lazy" />
  </div>
  {{ else }}
  <section class="faq-hero h-[363px] md:h-[350px]" style="--faq-bg: url('/img/faq-hero-bg.png')" aria-labelledby="faq-hero-heading">
    <div class="absolute bottom-0 left-0 z-[2]">
      <img src="/img/drone-left.png" alt="Декоративний дрон зліва" aria-hidden="true"
        class="w-[162px] h-[104px] md:w-[260px] md:h-[167px] lg:w-[306px] lg:h-[197px]" loading="lazy" />
    </div>
    <div class="absolute top-0 right-0 md:bottom-0 md:top-auto z-[2]">
      <img src="/img/drone-right.png" alt="Декоративний дрон справа" aria-hidden="true"
        class="w-[92px] h-[64px] md:w-[238px] md:h-[167px] lg:w-[282px] lg:h-[197px]" loading="lazy" />
    </div>
    {{ end }}
    <div
      class="max-w-[1055px] w-full mx-auto pt-[100px] md:pt-[80px] px-[20px]">
      <h1 id="faq-hero-heading"
        class="title hero-title !text-[clamp(24px,4vw,48px)] font-medium font-[Unbounded] text-[#fefefe] !mb-[30px] !md:mb-[35px] !lg:mb-[15px]">
        <span>П</span>{{ $title }}
      </h1>
      <h3
        class="max-w-[min(1155px,85vw)] mx-auto text-[#fefefe] text-[clamp(16px,2vw,20px)] font-[Montserrat] font-normal">
        {{ $subtitle }}
      </h3>
    </div>
  </section>

  <style>
    .faq-hero {
      position: relative;
      overflow: hidden;
      text-align: center;
      background-image: var(--faq-bg);
      background-size: cover;
      background-position: center;
      margin-bottom: 20px;
      margin-top: -1px !important;
    }

    .title {
      font-family: 'Unbounded', sans-serif;
      font-weight: 600;
    }

    .title span {
      color: #ba0108;
    }

    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }

      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .hero-title {
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease-out;
    }

    .hero-title.animate {
      animation: fadeInUp 0.8s ease-out forwards;
    }
  </style>

  {{ "<!-- Hero title animation script -->" | safeHTML }}
  <script>
    // Hero title animation
    function animateHeroTitle() {
      const heroTitles = document.querySelectorAll('.hero-title');

      const observerOptions = {
        threshold: 0.3,
        rootMargin: '0px 0px -50px 0px'
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('animate');
          } else {
            // Remove animation class when out of view for repeatable effect
            entry.target.classList.remove('animate');
          }
        });
      }, observerOptions);

      heroTitles.forEach(title => {
        observer.observe(title);
      });
    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', animateHeroTitle);
  </script>