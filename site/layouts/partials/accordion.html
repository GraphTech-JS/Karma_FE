{{ $title := .title }}
{{ $items := .items }}
{{ $className := .className | default "" }}
{{ $titleClassName := .titleClassName | default "" }}

<section class="relative flex flex-col items-center bg-white mt-[60px] mb-[60px] lg:mt-[112px] lg:mb-[80px]"
    aria-labelledby="accordion-heading">
    <div class="w-full max-w-[1237px] px-5">
        {{ if $title }}
        <h2 id="accordion-heading"
            class="font-[Unbounded] font-medium text-[32px] lg:text-[40px] text-center lg:!text-left text-[#020303] mb-6 {{ $titleClassName }}">
            {{ $title }}
        </h2>
        {{ end }}
        <div class="w-full mx-auto flex flex-col gap-[30px] max-w-[600px] md:max-w-[949px] lg:max-w-[949px] xl:max-w-[1237px]"
            data-accordion-list role="list" aria-label="Список питань та відповідей">
            {{ range $index, $item := $items }}
            <div class="accordion-wrapper" role="listitem">
                <details class="accordion-root group border-b border-[#303030]">
                    <summary class="flex cursor-pointer select-none accordion-summary"
                        aria-label="Розгорнути відповідь на питання: {{ .question }}">
                        <h3
                            class="font-[Montserrat] text-[16px] md:text-[20px] lg:text-[24px] font-medium accordion-question-text">
                            {{ .question }}</h3>
                        <img src="/img/arrow.svg" alt="Іконка розгортання" width="20" height="20"
                            class="accordion-icon" />
                    </summary>
                    <div class="accordion-content">
                        <p class="font-[Montserrat] text-[16px] lg:text-[18px] font-normal text-[#1f2937]">
                            {{ .answer }}
                        </p>
                    </div>
                </details>
            </div>
            {{ end }}
        </div>
    </div>
</section>

<style>
    .accordion-wrapper {
        width: 100%;
    }

    .accordion-question-text {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }



    .accordion-root {
        max-width: 100%;
        margin: 0 auto;
    }

    .accordion-summary {
        position: relative !important;
        display: flex !important;
        align-items: center !important;
        padding: 23px 45px !important;
        transition: background-color 400ms ease, color 400ms ease !important;
        background: #fff !important;
        color: #020303 !important;
        cursor: pointer;
        min-height: 80px !important;
    }

    .accordion-summary::-webkit-details-marker {
        display: none;
    }

    .accordion-summary::marker {
        content: '';
    }

    .accordion-root[open] .accordion-summary {
        background: #ba0108 !important;
        color: #fff !important;
    }

    .accordion-icon {
        margin-left: auto !important;
        width: 33px !important;
        height: 18px !important;
        transform: rotate(0deg) !important;
        transition: transform 500ms ease-in-out, filter 300ms ease-in-out !important;
        filter: brightness(0) !important;
    }

    .accordion-root[open] .accordion-icon {
        transform: rotate(-180deg) !important;
        filter: brightness(0) invert(1) !important;
    }

    .accordion-root::details-content {
        transition: block-size 600ms, content-visibility 600ms allow-discrete !important;
        overflow: hidden !important;
        block-size: 0 !important;
        inline-size: 100% !important;
        content-visibility: hidden !important;
    }

    .accordion-root[open]::details-content {
        block-size: auto !important;
        content-visibility: visible !important;
    }

    .accordion-content {
        overflow: visible !important;
        max-height: none !important;
        opacity: 1 !important;
        transition: none !important;
        width: 100% !important;
        padding: 12px 46px !important;
    }



    @media (max-width: 1240px) {
        .accordion-summary {
            padding-left: 24px !important;
            padding-right: 24px !important;
        }
    }

    @media (max-width: 960px) {
        .accordion-summary {
            padding-left: 20px !important;
            padding-right: 20px !important;
        }
    }

    @media (max-width: 800px) {
        .accordion-summary {
            padding-left: 16px !important;
            padding-right: 16px !important;
        }
    }

    @media (max-width: 1024px) {
        .accordion-summary {
            padding-left: 20px !important;
            padding-right: 20px !important;
            min-height: 70px !important;
        }

        .accordion-content {
            padding: 10px 20px !important;
        }

        .accordion-icon {
            width: 25px !important;
            height: 15px !important;
        }
    }

    @media (max-width: 1240px) {
        .accordion-summary {
            padding-left: 24px !important;
            padding-right: 24px !important;
        }
    }

    @media (max-width: 960px) {
        .accordion-summary {
            padding-left: 20px !important;
            padding-right: 20px !important;
        }
    }

    @media (max-width: 800px) {
        .accordion-summary {
            padding-left: 16px !important;
            padding-right: 16px !important;
        }
    }

    @media (max-width: 560px) {
        .accordion-wrapper {
            margin: 0 auto !important;
        }

        .accordion-root {
            max-width: 100% !important;
            padding-left: 0 !important;
            padding-right: 0 !important;
        }

        .accordion-content {
            padding: 10px !important;
        }

        .accordion-summary {
            padding-left: 16px !important;
            padding-right: 16px !important;
        }

        .accordion-icon {
            align-self: flex-start !important;
            margin-top: 0 !important;
        }

        .accordion-question-text {
            display: -webkit-box !important;
            -webkit-line-clamp: 3 !important;
            -webkit-box-orient: vertical !important;
            overflow: hidden !important;
            padding-right: 6px !important;
            text-align: left !important;
        }
    }
</style>

<script>
    (function () {
        var lists = document.querySelectorAll('[data-accordion-list]');
        lists.forEach(function (list) {
            var items = Array.prototype.slice.call(
                list.querySelectorAll('.accordion-root')
            );
            items.forEach(function (item) {
                item.addEventListener('toggle', function () {
                    if (item.open) {
                        items.forEach(function (other) {
                            if (other !== item) {
                                other.open = false;
                            }
                        });
                    }
                });
            });
        });
    })();
</script>